"use strict";function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var REF_DELIMITER=".",Data=function(){function r(e,t){if(_classCallCheck(this,r),"object"!==_typeof(e))throw new TypeError("Cannot create Data with a non-object as target","listenable-data.js");if("function"!=typeof t)throw new TypeError("Cannot create Data with a non-function as handler","listenable-data.js");return r._observable(e,t)}return _createClass(r,null,[{key:"refs",value:function(e){return function e(r){var n=[];return Object.keys(r).forEach(function(t){n.push([t]),"object"===_typeof(r[t])&&null!==r[t]&&e(r[t]).forEach(function(e){n.push([t].concat(_toConsumableArray(e)))})}),n}(e).map(function(e){return e.join(REF_DELIMITER)})}},{key:"contains",value:function(e,t){return this.refs(e).includes(t)}},{key:"_observable",value:function(e,u){var c=this;return new Proxy(e,function e(t){var i=0<arguments.length&&void 0!==t?t:[];return{get:function(t,r,n){try{return new Proxy(t[r],e([].concat(_toConsumableArray(i),[r])))}catch(e){return Reflect.get(t,r,n)}},defineProperty:function(e,t,r){var n=[].concat(_toConsumableArray(i),[t]).join(REF_DELIMITER),o=r.value,a=e[t];return u.call(c,n,o,a),Reflect.defineProperty(e,t,r)}}}())}}]),r}();module.exports=Data;
