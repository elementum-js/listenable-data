!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Data={})}(this,(function(t){"use strict";
function e(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var s=arguments[e],i=0,l=s.length;i<l;i++,o++)n[o]=s[i];return n}var r=function(){function t(t){return this["::listeners"]={},Object.assign(this,t),this._observable()}return t.prototype.listen=function(t,e){this["::listeners"][t]=e},t.prototype.listenAll=function(t){this["::listeners"]["*"]=t},t.prototype.dismiss=function(t){if(!Object.prototype.hasOwnProperty.call(this["::listeners"],t))throw new Error("the reference provided has not any listener registered.");delete this["::listeners"][t]},t.prototype.dismissAll=function(){if(!Object.prototype.hasOwnProperty.call(this["::listeners"],"*"))throw new Error("listenable data has not any global listener registered.");delete this["::listeners"]["*"]},t.prototype.contains=function(t){return this.refs().includes(t)},t.prototype.refs=function(){for(var t=function(r){for(var n=[],o=Object.keys(r),s=o.length,i=0;i<s;i++){var l=o[i];if(!l.startsWith("::")){var f=r[l];if(n.push([l]),"object"==typeof f&&null!==f)for(var a=t(f),p=a.length,u=0;u<p;u++)n.push(e([l],a[u]))}}return n},r=[],n=t(this),o=n.length,s=0;s<o;s++)r.push(n[s].join("."));return r},t.prototype._handler=function(t,e,r){Object.prototype.hasOwnProperty.call(this["::listeners"],t)&&(0,this["::listeners"][t])(e,r);Object.prototype.hasOwnProperty.call(this["::listeners"],"*")&&(0,this["::listeners"]["*"])(e,r,t)},t.prototype._observable=function(){var t=this,r=function(n){return void 0===n&&(n=[]),{get:function(t,o,s){try{if(o.startsWith("::"))throw null;return new Proxy(t[o],r(e(n,[o])))}catch(e){return Reflect.get(t,o,s)}},defineProperty:function(r,o,s){var i=e(n,[o]).join("."),l=s.value,f=r[o];return t._handler.call(t,i,l,f),Reflect.defineProperty(r,o,s)}}};return new Proxy(t,r())},t}();t.default=r,Object.defineProperty(t,"__esModule",{value:!0})}));