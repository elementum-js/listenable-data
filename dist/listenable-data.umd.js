!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).Data=t()}(this,function(){"use strict";function f(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(){function e(n,t){if(!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"object"!==o(n))throw new TypeError("Cannot create Data with a non-object as target","listenable-data.js");if("function"!=typeof t)throw new TypeError("Cannot create Data with a non-function as handler","listenable-data.js");return e._observable(n,t)}var n,t,r;return n=e,r=[{key:"refs",value:function(n){return function n(e){var r=[];return Object.keys(e).forEach(function(t){r.push([t]),"object"===o(e[t])&&null!==e[t]&&n(e[t]).forEach(function(n){r.push([t].concat(f(n)))})}),r}(n).map(function(n){return n.join(".")})}},{key:"contains",value:function(n,t){return this.refs(n).includes(t)}},{key:"_observable",value:function(n,u){var c=this;return new Proxy(n,function n(t){var i=0<arguments.length&&void 0!==t?t:[];return{get:function(t,e,r){try{return new Proxy(t[e],n([].concat(f(i),[e])))}catch(n){return Reflect.get(t,e,r)}},defineProperty:function(n,t,e){var r=[].concat(f(i),[t]).join("."),o=e.value,a=n[t];return u.call(c,r,o,a),Reflect.defineProperty(n,t,e)}}}())}}],(t=null)&&a(n.prototype,t),r&&a(n,r),e}()});
